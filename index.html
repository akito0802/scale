
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tber - スケール辞典</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin: 2em; }
    select { margin: 0.5em; font-size: 1em; }
    table { margin: auto; border-collapse: collapse; margin-top: 1em; }
    th, td { border: 1px solid #ccc; padding: 0.5em 1em; }
    #description { margin-top: 1em; max-width: 600px; margin-left: auto; margin-right: auto; }
  </style>
</head>
<body>
  <h1>Tberスケール辞典</h1>
  <div>
    <select id="keySelect">
      <option value="C">C</option><option value="D">D</option><option value="E">E</option>
      <option value="F">F</option><option value="G">G</option><option value="A">A</option>
      <option value="B">B</option>
    </select>
    <select id="groupSelect">
      <option value="major">メジャー</option>
      <option value="minor">マイナー</option>
      <option value="church">チャーチモード</option>
      <option value="jazz">ジャズ</option>
      <option value="ethnic">民族</option>
    </select>
    <select id="scaleSelect"></select>
  </div>
  <div id="tableArea"></div>
  <div id="description"></div>
  <script>
    const scaleData = {
      major: {
        "メジャースケール": {
          degrees: ["1", "2", "3", "4", "5", "6", "7"],
          notes:   ["C", "D", "E", "F", "G", "A", "B"],
          description: "メジャースケールは明るく安定した音階で、ポップスやクラシックなど幅広いジャンルの基礎です。"
        }
      },
      minor: {
        "ナチュラルマイナー": {
          degrees: ["1", "2", "♭3", "4", "5", "♭6", "♭7"],
          notes:   ["C", "D", "E♭", "F", "G", "A♭", "B♭"],
          description: "ナチュラルマイナースケールは哀愁漂う響きを持ち、ロックやジャズでも多用されます。"
        }
      },
      church: {
        "ドリアン": {
          degrees: ["1", "2", "♭3", "4", "5", "6", "♭7"],
          notes:   ["C", "D", "E♭", "F", "G", "A", "B♭"],
          description: "ドリアンはマイナーながら明るさを感じるモードで、ジャズやファンクに最適です。"
        }
      },
      jazz: {
        "オルタード": {
          degrees: ["1", "♭9", "#9", "3", "#11", "♭13", "♭7"],
          notes:   ["C", "D♭", "D#", "E", "F#", "A♭", "B♭"],
          description: "オルタードはドミナント7thコードにテンションを加えたジャズ特有のスケールです。"
        }
      },
      ethnic: {
        "エジプトスケール": {
          degrees: ["1", "2", "♭3", "5", "♭6"],
          notes:   ["C", "D", "E♭", "G", "A♭"],
          description: "エジプトスケールは異国情緒あふれる旋律で、民族音楽やサウンドトラックに使用されます。"
        }
      }
    };

    const keySelect = document.getElementById("keySelect");
    const groupSelect = document.getElementById("groupSelect");
    const scaleSelect = document.getElementById("scaleSelect");
    const tableArea = document.getElementById("tableArea");
    const descArea = document.getElementById("description");

    function updateScales() {
      const group = groupSelect.value;
      const scales = scaleData[group];
      scaleSelect.innerHTML = "";
      for (let name in scales) {
        const opt = document.createElement("option");
        opt.value = name;
        opt.textContent = name;
        scaleSelect.appendChild(opt);
      }
      updateTable();
    }

    function updateTable() {
      const group = groupSelect.value;
      const scale = scaleSelect.value;
      const scaleObj = scaleData[group][scale];
      const table = `
        <table>
          <tr>${scaleObj.degrees.map(d => `<th>${d}</th>`).join('')}</tr>
          <tr>${scaleObj.notes.map(n => `<td>${n}</td>`).join('')}</tr>
        </table>
      `;
      tableArea.innerHTML = table;
      descArea.textContent = scaleObj.description;
    }

    keySelect.addEventListener("change", () => updateTable());
    groupSelect.addEventListener("change", updateScales);
    scaleSelect.addEventListener("change", updateTable);

    // 初期化
    updateScales();
  </script>
</body>
</html>
